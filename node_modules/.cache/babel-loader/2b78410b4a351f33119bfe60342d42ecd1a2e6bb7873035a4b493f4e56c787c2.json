{"ast":null,"code":"// firestore - Firebase implementation of a simple key/value store - Copyright (C) 2015 by yieme - All Rights Reserved - License: MIT\n\n;\n(function () {\n  'use strict';\n\n  var _ = require('lodash'),\n    Firebase = require('firebase'),\n    FirebaseTokenGenerator = require('firebase-token-generator');\n  function Firestore(options, callback) {\n    // TODO: co upgrade\n    if (!_.isFunction(callback)) {\n      return _.partial(Firestore, options);\n    }\n    var firestore = this;\n    options = options || {};\n    options.child = options.child || 'kv';\n    options.path = options.path || options.child;\n    if (options.name) options.url = 'https://' + options.name + '.firebaseio.com/';\n    if (options.url && options.url.substr(-1) != '/') options.url += '/';\n    var Ref = options.ref || options.url && new Firebase(options.url) || false;\n    if (!Ref) {\n      callback(new Error(\"Firestore: ref or url required\"));\n      return;\n    }\n    function complete() {\n      callback(null, firestore);\n    }\n    if (options.path) {\n      Ref = Ref.child(options.path);\n    } else {\n      var path = '/' + Ref.toString().split('.com/')[1];\n      Ref = Ref.root().child(path); // generate new firebase reference\n    }\n\n    firestore.get = function (key, callback) {\n      // get key value\n      if (!_.isFunction(callback)) {\n        return _.partial(Firestore.get, key);\n      }\n      var ref = Ref.child(key);\n      ref.once('value', function (snap) {\n        var val = snap.val();\n        callback(null, val);\n      }, callback);\n    };\n    firestore.set = function (key, value, callback) {\n      // set key/value\n      if (callback && !_.isFunction(callback)) {\n        return _.partial(Firestore.set, key, value);\n      }\n      try {\n        Ref.child(key).set(value, callback);\n      } catch (err) {\n        if (callback) {\n          callback(err);\n        } else {\n          throw err;\n        }\n      }\n    };\n    firestore.del = function (key, callback) {\n      // clear key\n      if (callback && !_.isFunction(callback)) {\n        return _.partial(Firestore.del, key);\n      }\n      Ref.child(key).remove(callback);\n    };\n    if (options.token) {\n      var token = options.token;\n      if (options.auth) {\n        var tokenGen = new FirebaseTokenGenerator(options.token);\n        token = tokenGen.createToken(options.auth);\n      }\n      try {\n        Ref.authWithCustomToken(token, complete);\n      } catch (err) {\n        callback(err);\n      }\n    } else {\n      complete();\n    }\n    if (options.autoRemove) {\n      Ref.onDisconnect().remove();\n    }\n  }\n  if (typeof exports === 'object') module.exports = Firestore; // support CommonJS\n  // else if (typeof define === 'function' && define.amd) define(function() { return Firestore }) // support AMD\n  // else this.Firestore = Firestore // support browser\n})();","map":{"version":3,"names":["_","require","Firebase","FirebaseTokenGenerator","Firestore","options","callback","isFunction","partial","firestore","child","path","name","url","substr","Ref","ref","Error","complete","toString","split","root","get","key","once","snap","val","set","value","err","del","remove","token","auth","tokenGen","createToken","authWithCustomToken","autoRemove","onDisconnect","exports","module"],"sources":["C:/Users/Eze/Desktop/entregafinalveronreactjs/node_modules/firestore/index.js"],"sourcesContent":["// firestore - Firebase implementation of a simple key/value store - Copyright (C) 2015 by yieme - All Rights Reserved - License: MIT\n\n;(function() {\n  'use strict';\n\n  var _                      = require('lodash')\n    , Firebase               = require('firebase')\n    , FirebaseTokenGenerator = require('firebase-token-generator')\n\n  function Firestore(options, callback) { // TODO: co upgrade\n    if(!_.isFunction(callback)) {\n      return _.partial(Firestore, options)\n    }\n\n    var firestore = this\n    options       = options || {}\n    options.child = options.child || 'kv'\n    options.path  = options.path || options.child\n    if (options.name) options.url = 'https://' + options.name + '.firebaseio.com/'\n    if (options.url && options.url.substr(-1) != '/') options.url += '/'\n    var Ref = options.ref || (options.url && new Firebase(options.url)) || false\n    if (!Ref) {\n      callback(new Error(\"Firestore: ref or url required\"))\n      return\n    }\n\n    function complete() {\n      callback(null, firestore)\n    }\n\n    if (options.path) {\n      Ref = Ref.child(options.path)\n    } else {\n      var path = '/' + Ref.toString().split('.com/')[1]\n      Ref = Ref.root().child(path)  // generate new firebase reference\n    }\n\n    firestore.get = function (key, callback) { // get key value\n      if(!_.isFunction(callback)) {\n        return _.partial(Firestore.get, key)\n      }\n\n      var ref = Ref.child(key)\n      ref.once('value', function (snap) {\n        var val = snap.val()\n        callback(null, val)\n      }, callback);\n    }\n\n\n\n    firestore.set = function (key, value, callback) { // set key/value\n      if(callback && !_.isFunction(callback)) {\n        return _.partial(Firestore.set, key, value)\n      }\n\n      try {\n        Ref.child(key).set(value, callback)\n      } catch (err) {\n        if (callback) {\n          callback(err)\n        } else {\n          throw err\n        }\n      }\n    }\n\n\n\n    firestore.del = function (key, callback) { // clear key\n      if(callback && !_.isFunction(callback)) {\n        return _.partial(Firestore.del, key)\n      }\n\n      Ref.child(key).remove(callback);\n    }\n\n\n\n    if (options.token) {\n      var token      = options.token\n      if (options.auth) {\n        var tokenGen = new FirebaseTokenGenerator(options.token)\n        token        = tokenGen.createToken(options.auth)\n      }\n      try {\n        Ref.authWithCustomToken(token, complete)\n      } catch (err) { callback(err) }\n    } else {\n      complete()\n    }\n\n    if (options.autoRemove) {\n      Ref.onDisconnect().remove()\n    }\n  }\n\n\n\n  if (typeof exports === 'object') module.exports = Firestore // support CommonJS\n  // else if (typeof define === 'function' && define.amd) define(function() { return Firestore }) // support AMD\n  // else this.Firestore = Firestore // support browser\n})();\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}